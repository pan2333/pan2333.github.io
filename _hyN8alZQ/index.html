<html>
<head>
    <meta charset="utf-8"/>
<meta name="description" content=""/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>你是不是真的需要一个软路由 | pan2333的博客</title>

<link rel="shortcut icon" href="https://pan2333.github.io/favicon.ico?v=1629269171225">

<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://pan2333.github.io/styles/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css">

<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dockerfile.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dart.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/moment@2.27.0/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script>
<!-- DEMO JS -->
<!--<script src="media/scripts/index.js"></script>-->



    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css">
</head>
<body>
<div class="main gt-bg-theme-color-first">
    <nav class="navbar navbar-expand-lg">
    <div class="navbar-brand">
        <img class="user-avatar" src="/images/avatar.png" alt="头像">
        <div class="site-name gt-c-content-color-first">
            pan2333的博客
        </div>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
                <div class="nav-item">
                    
                        <a href="/" class="menu gt-a-link">
                            首页
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/archives" class="menu gt-a-link">
                            归档
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/tags" class="menu gt-a-link">
                            标签
                        </a>
                    
                </div>
            
                <div class="nav-item">
                    
                        <a href="/post/about" class="menu gt-a-link">
                            关于
                        </a>
                    
                </div>
            
        </div>
        <div style="text-align: center">
            <form id="gridea-search-form" style="position: relative" data-update="1629269171225" action="/search/index.html">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="搜索文章" />
                <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
        </div>
    </div>
</nav>

    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second">
            <article class="gt-post-content">
                <h2 class="post-title">
                    你是不是真的需要一个软路由
                </h2>
                <div class="post-info">
                    <time class="post-time gt-c-content-color-first">
                        · 2021-08-18 ·
                    </time>
                    
                        <a href="https://pan2333.github.io/1uSqwClCT/" class="post-tags">
                            # 软路由
                        </a>
                    
                </div>
                <div class="post-content">
                    <h2 id="我为什么要买软路由">我为什么要买软路由</h2>
<p>我打算虚拟机多开op+黑群晖+docker，而斐讯N1已经达不到我的要求，N1作为旁路由还是可以的，但带多个docker还是不太行，毕竟配置摆在那里。所以我买了个j4125+4<em>2.5的软路由，找aki py两个苹果原装内存</em>1，279买了紫光480g作为储存，别问我为啥不买nvme，问就是穷。</p>
<figure data-type="image" tabindex="1"><img src="https://pan2333.github.io/post-images/1629268870024.jpg" alt="" loading="lazy"></figure>
<h2 id="购买的一些坑">购买的一些坑</h2>
<h2 id="首先商品页面上说支持19v电源后来进群才知道主板默认不支持得去掉一个三极管才行白白花费了我的时间其次1中苹果原装内存在商品详情页中是可以使用的但是插入无法使用美光的内存条不兼容-我只好在咸鱼上又买了根科赋的条光内存条和电源就白白拖了我一个星期-所以买这种diy产品需谨慎如果不是对某些功能有强烈需求建议买大厂主板假如你恰巧财力雄厚建议直接买服务器主板">首先，商品页面上说支持19v电源，后来进群才知道主板默认不支持，得去掉一个三极管才行，白白花费了我的时间，其次*1中苹果原装内存在商品详情页中是可以使用的，但是插入无法使用，美光的内存条不兼容。我只好在咸鱼上又买了根科赋的条，光内存条和电源就白白拖了我一个星期。所以买这种DIY产品需谨慎，如果不是对某些功能有强烈需求建议买大厂主板，假如你恰巧财力雄厚建议直接买服务器主板。</h2>
<h2 id="机器底层">机器底层</h2>
<p>由于我准备虚拟机跑所需要的环境，为的是避免all in boom，一个虚拟机出现问题了对其他虚拟机不会造成影响。所以我打算在EXSI.UNRAID和PVE中选择。我先简单介绍下这三种系统。</p>
<h3 id="1esxi">1.ESXI</h3>
<p>VMware ESXi：专门构建的裸机 Hypervisor  https://www.vmware.com/cn/products/esxi-and-esx.html 了解可直接安装到您的物理服务器的、可靠的<a href="https://www.vmware.com/topics/glossary/content/bare-metal-hypervisor">裸机 Hypervisor</a>。通过直接访问并控制底层资源，VMware ESXi 可有效地对硬件进行分区，以便整合应用并降低成本。它是业界领先的高效体系架构，在可靠性、性能和支持方面树立了行业标杆。ESXi 可将多台服务器整合到较少物理设备中，从而减少对空间、电力和 IT 管理的要求，同时提升性能。</p>
<p><strong>占用空间小</strong></p>
<p>尽管 ESXi 占用空间仅为 150 MB，却可实现更多功能，同时还能最大限度地降低 Hypervisor 的安全风险。</p>
<p><strong>可靠的性能</strong></p>
<p>适应任何规模的应用。虚拟机配置最高可达 128 个虚拟 CPU、6 TB 的 RAM 和 120 台设备，以满足您的所有应用需求。咨询各项解决方案限制以确保您不会超过您环境的受支持配置。了解有关<a href="https://www.vmware.com/pdf/vsphere6/r65/vsphere-65-configuration-maximums.pdf">配置上限</a>的更多信息。</p>
<p><strong>增强的安全性</strong></p>
<p>利用强大的加密功能保护敏感的虚拟机数据。基于角色的访问可简化管理，而广泛的日志记录和审核可以更好地落实责任，还可更加轻松地进行取证分析。</p>
<p><strong>卓越的生态系统</strong></p>
<p>获取对由硬件 OEM 供应商、技术服务合作伙伴、应用和客户机操作系统组成的广泛生态系统的支持。</p>
<p><strong>方便用户使用的体验</strong></p>
<p>利用基于 HTML5 标准的内置现代 UI 管理日常行政操作。对于需要实现运维自动化的客户，VMware 提供 vSphere 命令行界面和便于开发人员使用、基于 REST的 API</p>
<hr>
<h3 id="2unraid-httpsunraidnetzh">2.UNRAID https://unraid.net/zh</h3>
<p><strong>解放你的硬件</strong><br>
借助 Unraid OS，媒体爱好者、游戏玩家和  其它数据密集型用户可以任意搭配硬件，进而<br>
实现对数据、媒体和应用程序的终极控制。</p>
<p><strong>控制您的数据</strong><br>
打破单一操作系统的局限性。在 Unraid 中，您可以对系统资源进行分区，以存储和保护数据、运行应用程序和/或在独立环境下创建虚拟机。</p>
<h3 id="3proxmox-virtual-environmentpve-httpspveproxmoxcomwikimain_page">3.Proxmox Virtual Environment（PVE https://pve.proxmox.com/wiki/Main_Page</h3>
<p><strong>Proxmox 虚拟环境</strong>是基于 QEMU/KVM 和 LXC 的开源服务器虚拟化管理解决方案。您可以使用集成的易于使用的 Web 界面或通过 CLI 管理虚拟机器、容器、高度可用的集群、存储和网络。Proxmox VE 代码根据 GNU Affero 通用公共许可证（第 3 版）获得许可。该项目是由<a href="https://www.proxmox.com/">Proxmox服务器解决方案有限公司</a>开发和维护的。</p>
<p>有关 Proxmox VE 关键功能的概述，请参阅<a href="https://www.proxmox.com/en/proxmox-ve/features">Proxmox 网站</a>。</p>
<p>(PVEj接下来的部分是我写的，请多担待)</p>
<p><strong>虚拟化</strong><br>
PVE基于Debian而来，原生支持Linux服务器的虚拟化，由于使用Linux内核，可以方便使用KVM来构建。同时PVE也有自己独特的基于容器的虚拟化LXC，它占用空间小（比如Ubuntu server 下载ISO文件得有1G+,而使用LXC版本的只需要300M左右），它是一个操作系统级虚拟化环境，所以可以方便的通过一个系统带多个系统而且不互相干扰，可以使管理成本大大降低。</p>
<p><strong>管理</strong><br>
PVE使用节点这一概念，一个主机就是一个节点，你可以设置主节点，形成中央集权管理，集群堆栈完全集成。PVE一般不用直接连接主机，可以方便的通过WEB UI管理使用，不需要单独的管理服务器。</p>
<p><strong>网络与存储</strong><br>
PVE内建brige，可以方便的内部通信，也可以直接内部聚和/分离，这样，就可以利用 Linux 网络堆栈的全部功率，为 Proxmox VE 主机构建复杂、灵活、虚拟的网络。</p>
<p>关于存储，VM 图像可以存储在一个或几个本地存储设备上，也可以存储在共享存储（如 NFS 和 SAN）上。没有限制。您可以根据需要配置尽可能多的存储空间，并可以使用可用于 Debian GNU/Linux 的所有存储技术。将虚拟机存储在共享存储空间的好处是能够在没有任何停机时间的情况下实时迁移运行机器。而且PVE7.0也支持了CEPH存储，可以方便管理大型存储。</p>
<h3 id="network-storage-types-supported">Network storage types supported</h3>
<ul>
<li>LVM Group (network backing with iSCSI targets)</li>
<li>iSCSI target</li>
<li>NFS Share</li>
<li>CIFS</li>
<li>Ceph RBD</li>
<li>Direct to iSCSI LUN</li>
<li>GlusterFS</li>
<li>CephFS</li>
</ul>
<h3 id="local-storage-types-supported">Local storage types supported</h3>
<ul>
<li>
<p>LVM Group</p>
</li>
<li>
<p>Directory (storage on an existing filesystem)</p>
</li>
<li>
<p><a href="http://pve.proxmox.com/wiki/ZFS" title="How to use local ZFS pools">ZFS</a></p>
</li>
</ul>
<hr>
<h2 id="我为什么选了pve">我为什么选了PVE</h2>
<p>ESXI7.0的底层完全大改，安装ESXI我估计只能安装6.4，7.0没有封装8125B的驱动，遂放弃。UNRAID是我最想安装的系统，但是UNRAID对U盘要求比较高，我试了几个U盘都没有安装成功(虽然UNRAID最令我心水),没办法只能放弃，于是我下载了PVE7.0用ventoy https://www.ventoy.net/cn/index.html 进入并成功安装7.0.8。使用教程网上一堆，我就不赘述了。由于国内环境，遂进行换国内源，更新最新驱动，更新系统到7.0.9的操作并加上一个温度显示插件。</p>
<p>底层构建完成了，我们开始了使用虚拟机的浪荡之路。</p>
<h3 id="docker专属虚拟机">DOCKER专属虚拟机</h3>
<p>本来我是准备使用alpine的，但是在查找apk文件时始终无法找到docker的包，遂换成 Ubuntu server (注意，在安装时记得选择国内源，我位于上海，选择了上海交大的源 https://mirrors.sjtug.sjtu.edu.cn/ )。Ubuntu安装好了，接下来就是安装docker了(注意进行国内镜像加速，官方不一定能访问到)</p>
<p>https://www.daocloud.io/mirror 个人比较推荐，有一键脚本和镜像，适合我这种懒人。</p>
<p>可以通过 Hello World 这个镜像查看自己是否安装成功了docker<br>
接下来安装很多人喜欢的Portainer，汉化版可以参考 https://wp.gxnas.com/10761.html 的文章，虽然我也安装了Portainer官方版，但是我还是更加习惯使用命令管理和安装docker的镜像和容器，习惯了命令行操作会觉得更加简洁，迅速。</p>
<p>docker命令</p>
<pre><code class="language-bash">$ docker

Usage:	docker [OPTIONS] COMMAND

A self-sufficient runtime for containers

Options:
      --config string      Location of client config files (default
                           &quot;/home/kalasearch/.docker&quot;)
  -c, --context string     Name of the context to use to connect to the daemon
                           (overrides DOCKER_HOST env var and default context set
                           with &quot;docker context use&quot;)
  -D, --debug              Enable debug mode
  -H, --host list          Daemon socket(s) to connect to
  -l, --log-level string   Set the logging level
                           (&quot;debug&quot;|&quot;info&quot;|&quot;warn&quot;|&quot;error&quot;|&quot;fatal&quot;) (default &quot;info&quot;)
      --tls                Use TLS; implied by --tlsverify
      --tlscacert string   Trust certs signed only by this CA (default
                           &quot;/home/kalasearch/.docker/ca.pem&quot;)
      --tlscert string     Path to TLS certificate file (default
                           &quot;/home/kalasearch/.docker/cert.pem&quot;)
      --tlskey string      Path to TLS key file (default
                           &quot;/home/kalasearch/.docker/key.pem&quot;)
      --tlsverify          Use TLS and verify the remote
  -v, --version            Print version information and quit

Management Commands:
  builder     Manage builds
  config      Manage Docker configs
  container   Manage containers
  context     Manage contexts
  engine      Manage the docker engine
  image       Manage images
  network     Manage networks
  node        Manage Swarm nodes
  plugin      Manage plugins
  secret      Manage Docker secrets
  service     Manage services
  stack       Manage Docker stacks
  swarm       Manage Swarm
  system      Manage Docker
  trust       Manage trust on Docker images
  volume      Manage volumes

Commands:
  attach      Attach local standard input, output, and error streams to a running container
  build       Build an image from a Dockerfile
  commit      Create a new image from a container's changes
  cp          Copy files/folders between a container and the local filesystem
  create      Create a new container
  diff        Inspect changes to files or directories on a container's filesystem
  events      Get real time events from the server
  exec        Run a command in a running container
  export      Export a container's filesystem as a tar archive
  history     Show the history of an image
  images      List images
  import      Import the contents from a tarball to create a filesystem image
  info        Display system-wide information
  inspect     Return low-level information on Docker objects
  kill        Kill one or more running containers
  load        Load an image from a tar archive or STDIN
  login       Log in to a Docker registry
  logout      Log out from a Docker registry
  logs        Fetch the logs of a container
  pause       Pause all processes within one or more containers
  port        List port mappings or a specific mapping for the container
  ps          List containers
  pull        Pull an image or a repository from a registry
  push        Push an image or a repository to a registry
  rename      Rename a container
  restart     Restart one or more containers
  rm          Remove one or more containers
  rmi         Remove one or more images
  run         Run a command in a new container
  save        Save one or more images to a tar archive (streamed to STDOUT by default)
  search      Search the Docker Hub for images
  start       Start one or more stopped containers
  stats       Display a live stream of container(s) resource usage statistics
  stop        Stop one or more running containers
  tag         Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE
  top         Display the running processes of a container
  unpause     Unpause all processes within one or more containers
  update      Update configuration of one or more containers
  version     Show the Docker version information
  wait        Block until one or more containers stop, then print their exit codes

Run 'docker COMMAND --help' for more information on a command.
</code></pre>
<p>docker help</p>
<pre><code class="language-bash">docker ${docker-subcommand} --help
</code></pre>
<p>docker系统信息</p>
<pre><code class="language-bash">docker info
</code></pre>
<p>一般常用的docker命令也就是 ps ps-a pull push start stop rm 这些命令。</p>
<h3 id="我的一些推荐">我的一些推荐</h3>
<h4 id="wallabag-httpsdocwallabagorgenadmininstallationinstallationhtmlinstallation-介绍文章-httpswwwappinncomwallabag">wallabag https://doc.wallabag.org/en/admin/installation/installation.html#installation 介绍文章 https://www.appinn.com/wallabag/</h4>
<h4 id="halo-httpsdocshalorun-个人觉得这个作为博客系统比wp好些wp功能比较多显得臃肿而且强烈推荐付费不太好">halo https://docs.halo.run/ 个人觉得这个作为博客系统比wp好些，wp功能比较多显得臃肿而且强烈推荐付费不太好。</h4>
<h4 id="home-assistant-这个智能家居控制系统我也不用多介绍了吧">Home Assistant 这个智能家居控制系统我也不用多介绍了吧</h4>
<p>未完待续（滑稽</p>

                </div>
            </article>
        </div>

        
            <div class="next-post">
                <div class="next gt-c-content-color-first">下一篇</div>
                <a href="https://pan2333.github.io/hello-gridea/" class="post-title gt-a-link">
                    Hello Gridea
                </a>
            </div>
        

        

        

        

        <div class="site-footer gt-c-content-color-first">
    <div class="slogan gt-c-content-color-first">随便写写</div>
    <div class="social-container">
        
            
        
            
        
            
        
            
        
            
        
            
        
    </div>
    <div class="footer-info">
        Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
    </div>
    <div>
        Theme by <a href="https://imhanjie.com/" target="_blank">imhanjie</a>, Powered by <a
                href="https://github.com/getgridea/gridea" target="_blank">Gridea | <a href="https://pan2333.github.io/atom.xml" target="_blank">RSS</a></a>
    </div>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
</div>
</body>
</html>
